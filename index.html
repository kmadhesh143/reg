<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>UMA TOYS â€“ UPI Payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f7f7f7;
  text-align: center;
  padding: 20px;
}
.box {
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  max-width: 350px;
  margin: auto;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
input {
  width: 90%;
  padding: 10px;
  font-size: 16px;
  margin: 10px 0;
}
button {
  background: #1dbf73;
  color: #fff;
  border: none;
  padding: 12px 20px;
  font-size: 16px;
  border-radius: 5px;
  cursor: pointer;
  margin: 5px;
}
#qrcode img {
  margin-top: 15px;
}
</style>
</head>

<body>

<div class="box">
  <h2>ðŸ§¸ UMA TOYS ðŸ§¸</h2>

  <p>Enter Amount (â‚¹)</p>
  <input type="number" id="amount" placeholder="Enter amount">

  <br>
  <button onclick="generateQR()">Generate QR</button>

  <div id="qrcode"></div>

  <br>

  <a id="upiBtn" href="#" style="display:none;">
    <button>Pay with UPI</button>
  </a>

  <button id="shareBtn" style="display:none;" onclick="shareQR()">
    Share QR
  </button>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<script>
let qrImageURL = "";

function generateQR() {
  let amount = document.getElementById("amount").value;
  if (!amount || amount <= 0) {
    alert("Enter valid amount");
    return;
  }

  let upiLink =
    "upi://pay?pa=kmadhesh143@oksbi" +
    "&pn=UMA%20TOYS" +
    "&am=" + amount +
    "&cu=INR";

  document.getElementById("qrcode").innerHTML = "";

  let qr = new QRCode(document.getElementById("qrcode"), {
    text: upiLink,
    width: 220,
    height: 220
  });

  setTimeout(() => {
    let img = document.querySelector("#qrcode img");
    qrImageURL = img.src;
  }, 300);

  let btn = document.getElementById("upiBtn");
  btn.href = upiLink;
  btn.style.display = "inline-block";

  document.getElementById("shareBtn").style.display = "inline-block";
}

async function shareQR() {
  if (!navigator.share) {
    alert("Sharing not supported on this device");
    return;
  }

  const response = await fetch(qrImageURL);
  const blob = await response.blob();
  const file = new File([blob], "UMA_TOYS_UPI_QR.png", { type: "image/png" });

  navigator.share({
    title: "UMA TOYS Payment",
    text: "Scan & Pay using UPI",
    files: [file]
  });
}
</script>

</body>
</html>
