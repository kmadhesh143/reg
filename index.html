<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>UPI QR Generator & Share</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 20px;
}
input {
  width: 90%;
  padding: 12px;
  font-size: 16px;
  margin-bottom: 10px;
}
button {
  padding: 12px 20px;
  font-size: 16px;
  background: #0a7cff;
  color: #fff;
  border: none;
  border-radius: 6px;
  margin-top: 10px;
}
canvas {
  margin-top: 15px;
  max-width: 100%;
  border-radius: 10px;
  border: 1px solid #ddd;
}
</style>
</head>
<body>

<h2>UPI QR Generator & Share</h2>

<input type="text" id="amount" placeholder="Enter Amount (₹)">
<br>
<button onclick="generateQR()">Generate QR</button>

<br>
<canvas id="canvas" width="600" height="800"></canvas>
<br>
<button onclick="shareImage()">pay with upi</button>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const UPI_ID = "kmadhesh143@oksbi"; // <-- Replace with your UPI ID
let qrImage = new Image();

function generateQR() {
  const amount = document.getElementById("amount").value.trim() || "0";

  // Create UPI URL
  const upiURL = `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=Payment&am=${amount}&cu=INR`;

  // Use Google Chart API to generate QR code
  const qrSrc = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(upiURL)}&chld=L|1`;

  qrImage.src = qrSrc;
  qrImage.onload = () => {
    // Clear canvas
    ctx.fillStyle = "#fff";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Title
    ctx.fillStyle = "#000";
    ctx.font = "bold 36px Arial";
    ctx.textAlign = "center";
    ctx.fillText("PAYMENT QR", canvas.width / 2, 100);

    // Amount
    ctx.font = "bold 48px Arial";
    ctx.fillStyle = "#0a7cff";
    ctx.fillText("₹ " + amount, canvas.width / 2, 200);

    // Draw QR
    ctx.drawImage(qrImage, 150, 260, 300, 300);

    // Text below QR
    ctx.font = "20px Arial";
    ctx.fillStyle = "#555";
    ctx.fillText("Scan using any UPI App", canvas.width / 2, 620);
  };
}

async function shareImage() {
  canvas.toBlob(async (blob) => {
    const file = new File([blob], "upi-payment.png", { type: "image/png" });

    if (navigator.canShare && navigator.canShare({ files: [file] })) {
      await navigator.share({
        files: [file],
        title: "UPI Payment QR",
        text: "Scan & Pay"
      });
    } else {
      alert("Sharing not supported on this device");
    }
  });
}
</script>

</body>
</html>
